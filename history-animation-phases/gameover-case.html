<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Phase 3 – Game Over</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .world {
      position: relative;
      width: 800px;
      height: 400px;
      border: 3px solid #fff;
      background: #000020;
      overflow: hidden;
      margin-bottom: 16px;
    }

    .character {
      position: absolute;
      transition: all 1s ease;
    }

    /* pacman (hero) – da2ira ssefra */
    #pacman {
      width: 40px;
      height: 40px;
      background: #ffd700;
      border-radius: 50%;
      left: -15%;   /* kaybda barra men left */
      top: 60%;
    }

    /* pacwomen – da2ira 7emra */
    #pacwomen {
      width: 40px;
      height: 40px;
      background: #ff3333;
      border-radius: 50%;
      left: 65%;
      top: 60%;
      transition: all 1s ease, opacity 0.7s ease;
    }

    /* ghosts – rectangles zraq */
    .ghost {
      width: 35px;
      height: 55px;
      background: #007bff;
      border-radius: 6px;
      position: absolute;
      animation: floatGhost 2s ease-in-out infinite;
      transition: all 1s ease, opacity 0.7s ease;
    }

    #g1 { left: 60%; top: 45%; animation-delay: 0s; }
    #g2 { left: 70%; top: 55%; animation-delay: 0.3s; }
    #g3 { left: 80%; top: 65%; animation-delay: 0.6s; }

    @keyframes floatGhost {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    /* portal – l3alam dyalhom f right side */
    #portal {
      position: absolute;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 4px solid #6a5acd;
      right: 2%;
      top: 50%;
      transform: translateY(-50%);
      box-shadow: 0 0 20px rgba(106,90,205,0.8);
      background: radial-gradient(circle at center, rgba(106,90,205,0.5), transparent);
      opacity: 0.8;
    }

    button {
      padding: 8px 18px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      margin: 4px;
    }

    #continueBtn {
      background: #1e90ff;
      color: #fff;
    }

    #retryBtn {
      background: #dc3545;
      color: #fff;
      display: none;
    }

    .message {
      margin-top: 8px;
      height: 24px;
      text-align: center;
    }

    .game-over-text {
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 32px;
      letter-spacing: 3px;
      color: #ff4444;
      text-shadow: 0 0 8px rgba(255,0,0,0.8);
      opacity: 0;
      transition: opacity 1s ease;
    }

    .world.game-over {
      background: #200000;
      box-shadow: 0 0 25px rgba(255,0,0,0.7);
      transition: background 0.7s ease, box-shadow 0.7s ease;
    }
  </style>
</head>
<body>

  <div class="world" id="world">
    <!-- GAME OVER text -->
    <div id="gameOverLabel" class="game-over-text">GAME OVER</div>

    <!-- Pacman -->
    <div id="pacman" class="character"></div>

    <!-- Pacwomen m3a ghosts -->
    <div id="pacwomen" class="character"></div>

    <div id="g1" class="ghost"></div>
    <div id="g2" class="ghost"></div>
    <div id="g3" class="ghost"></div>

    <!-- PORTAL dyal 3alam ghosts -->
    <div id="portal"></div>
  </div>

  <div>
    <button id="continueBtn">Continue</button>
    <button id="retryBtn">Retry</button>
  </div>

  <div class="message" id="msg">
    Pacman fchel ye9t3 tari9... Ghosts m3a Pacwomen 7da l-portal dyal 3alamhom.
  </div>

  <script>
    const pacman = document.getElementById("pacman");
    const pacwomen = document.getElementById("pacwomen");
    const g1 = document.getElementById("g1");
    const g2 = document.getElementById("g2");
    const g3 = document.getElementById("g3");
    const portal = document.getElementById("portal");

    const msg = document.getElementById("msg");
    const world = document.getElementById("world");
    const continueBtn = document.getElementById("continueBtn");
    const retryBtn = document.getElementById("retryBtn");
    const gameOverLabel = document.getElementById("gameOverLabel");

    let step = 0;

    continueBtn.onclick = () => {
      step++;

      if (step === 1) {
        // Pacman kaydkhol men left
        msg.textContent = "Pacman dkhol men left, 7awel yzid ye7areb...";
        pacman.style.left = "15%";
      }

      else if (step === 2) {
        // Pacman 9arrab, walakin fchel – wa9ef, ghosts + pacwomen 7da l-portal
        msg.textContent = "Walakin fchel... Ghosts m3a Pacwomen 9rabin l-portal.";
        pacman.style.left = "30%";

        // n9arrbou ghosts + pacwomen shwiya l-portal
        g1.style.left = "65%";
        g2.style.left = "70%";
        g3.style.left = "75%";
        pacwomen.style.left = "68%";
      }

      else if (step === 3) {
        // Ghosts + pacwomen kaydkhlo l-portal (y9arrbou w ybdew yختafiw)
        msg.textContent = "Ghosts dkhlou l-portal m3a Pacwomen...";
        g1.style.left = "82%";
        g2.style.left = "84%";
        g3.style.left = "86%";
        pacwomen.style.left = "83%";

        g1.style.opacity = "0";
        g2.style.opacity = "0";
        g3.style.opacity = "0";
        pacwomen.style.opacity = "0";
      }

      else if (step === 4) {
        // GAME OVER state
        msg.textContent = "Pacman madar walo... GAME OVER.";
        world.classList.add("game-over");
        gameOverLabel.style.opacity = "1";

        continueBtn.style.display = "none";
        retryBtn.style.display = "inline-block";
      }
    };

    retryBtn.onclick = () => {
      // hna t3ayet l restart dyal level / game
      // ex: restartLevel(); wla reload page
      // window.location.reload();
      alert("Here you can restart the level (Retry).");
    };
  </script>

</body>
</html>
